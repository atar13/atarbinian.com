console.log('This site was generated by Hugo.');

let r = document.querySelector(':root');

function setColor(mode) {
    if (mode != "dark" && mode != "light") {
        return
    }
    document.getElementsByTagName("body")[0].className = mode 
}

function activateDarkMode() {
    localStorage.setItem("theme", "dark");
    setColor("dark")
    console.log("hiding sun")
    document.getElementsByClassName("moon-icon")[0].style.display = "block";
    document.getElementsByClassName("sun-icon")[0].style.display = "none";
}

function activateLightMode() {
    localStorage.setItem("theme", "light");
    setColor("light")
    console.log("hiding moon")
    document.getElementsByClassName("moon-icon")[0].style.display = "none";
    document.getElementsByClassName("sun-icon")[0].style.display = "block";
}
  
const darkModePreference = window.matchMedia("(prefers-color-scheme: dark)");
const lightModePreference = window.matchMedia("(prefers-color-scheme: light)");

darkModePreference.addEventListener("change", e => e.matches && activateDarkMode());
lightModePreference.addEventListener("change", e => e.matches && activateLightMode());

function toggleLight(params) {
    if (localStorage.getItem("theme") === "dark") {
        activateLightMode();
    } else {
        activateDarkMode();
    }
}

window.addEventListener("DOMContentLoaded", function() {
    if (localStorage.getItem("theme") === null) {
        if (darkModePreference.matches) {
            activateDarkMode();
        } else {
            activateLightMode();
        }
    } else if (localStorage.getItem("theme") == "dark") {
        activateDarkMode();
    } else if (localStorage.getItem("theme") == "light") {
        activateLightMode();
    }
})

window.toggleLight = toggleLight;
